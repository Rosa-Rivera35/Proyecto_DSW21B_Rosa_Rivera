<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simulador - Tercera Ley de Newton</title>
<style>
  body {
    background: linear-gradient(to bottom right, #e3f2fd, #fce4ec);
    font-family: 'Segoe UI', sans-serif;
    margin: 0;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  h2 {
    text-align: center;
    color: #003366;
    margin-bottom: 10px;
  }

  .panel {
    width: 100%;
    max-width: 800px;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 20px;
  }

  .card {
    flex: 1 1 320px;
    background: rgba(255,255,255,0.7);
    backdrop-filter: blur(10px);
    padding: 20px;
    border-radius: 15px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    min-width: 280px;
  }

  .card h3 {
    margin-top: 0;
    text-align: center;
    color: #0077c2;
  }

  label {
    display: block;
    margin-top: 10px;
    font-weight: 500;
    color: #003366;
  }

  input {
    width: 100%;
    padding: 8px;
    border-radius: 10px;
    border: 1px solid #ccc;
    font-size: 1em;
    margin-top: 5px;
  }

  button {
    width: 100%;
    padding: 10px;
    background: #0077c2;
    color: white;
    border: none;
    border-radius: 10px;
    font-weight: bold;
    margin-top: 10px;
    cursor: pointer;
    transition: 0.3s;
  }

  button:hover {
    background: #005b99;
  }

  .canvas-container {
    width: 100%;
    max-width: 800px;
    background: white;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.2);
    margin-top: 20px;
    padding: 10px;
  }

  canvas {
    width: 100%;
    height: auto;
    display: block;
  }

  .resultados {
    margin-top: 20px;
    background: rgba(255,255,255,0.8);
    backdrop-filter: blur(8px);
    padding: 15px;
    border-radius: 15px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    max-width: 600px;
    text-align: center;
  }
</style>
</head>
<body>
  <h2>üß† Simulador - Tercera Ley de Newton (Acci√≥n y Reacci√≥n)</h2>

  <div class="panel">
    <div class="card">
      <h3>Par√°metros de Simulaci√≥n</h3>
      <label>Masa 1 (kg): <input type="number" id="m1" value="2" step="0.1"></label>
      <label>Masa 2 (kg): <input type="number" id="m2" value="1" step="0.1"></label>
      <label>Fuerza aplicada (N): <input type="number" id="fuerza" value="10" step="0.1"></label>
      <button onclick="iniciarSimulacion()">Iniciar simulaci√≥n</button>
      <button onclick="reiniciar()">Reiniciar</button>
    </div>

    <div class="card">
      <h3>Resultados</h3>
      <p><strong>Fuerza sobre M1:</strong> <span id="F1">‚Äì</span> N</p>
      <p><strong>Fuerza sobre M2:</strong> <span id="F2">‚Äì</span> N</p>
      <p><strong>Aceleraci√≥n de M1:</strong> <span id="a1">‚Äì</span> m/s¬≤</p>
      <p><strong>Aceleraci√≥n de M2:</strong> <span id="a2">‚Äì</span> m/s¬≤</p>
    </div>
  </div>

  <div class="canvas-container">
    <canvas id="canvas" width="700" height="250"></canvas>
  </div>

  <div class="resultados" id="leyTexto">A toda acci√≥n corresponde una reacci√≥n igual y opuesta.</div>

<script>
let animFrame = null;

function iniciarSimulacion() {
  cancelarAnimacion();

  const m1 = parseFloat(document.getElementById('m1').value);
  const m2 = parseFloat(document.getElementById('m2').value);
  const F = parseFloat(document.getElementById('fuerza').value);

  // Fuerzas opuestas
  const F1 = -F;
  const F2 = F;

  // Aceleraciones
  const a1 = F1 / m1;
  const a2 = F2 / m2;

  document.getElementById('F1').textContent = F1.toFixed(2);
  document.getElementById('F2').textContent = F2.toFixed(2);
  document.getElementById('a1').textContent = a1.toFixed(2);
  document.getElementById('a2').textContent = a2.toFixed(2);

  // Escenario
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');

  let x1 = 220;
  let x2 = 460;
  let v1 = 0;
  let v2 = 0;
  const r1 = 30 + m1 * 5;
  const r2 = 30 + m2 * 5;

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Suelo
    ctx.fillStyle = "#ddd";
    ctx.fillRect(0, 180, canvas.width, 5);

    // Bloque 1
    ctx.fillStyle = "#f44336";
    ctx.fillRect(x1 - r1/2, 130, r1, 50);

    // Bloque 2
    ctx.fillStyle = "#4caf50";
    ctx.fillRect(x2 - r2/2, 130, r2, 50);

    // Fuerzas visuales
    ctx.strokeStyle = "#0000ff";
    ctx.lineWidth = 3;

    // Flecha acci√≥n
    drawArrow(ctx, x1 + r1/2, 155, x1 + r1/2 + 50, 155, "#0000ff");
    ctx.fillStyle = "#000";
    ctx.fillText("Acci√≥n (F)", x1 + r1/2 + 10, 145);

    // Flecha reacci√≥n
    drawArrow(ctx, x2 - r2/2, 155, x2 - r2/2 - 50, 155, "#ff0000");
    ctx.fillStyle = "#000";
    ctx.fillText("Reacci√≥n (-F)", x2 - r2/2 - 80, 145);

    // Actualizar posiciones
    v1 += a1 * 0.1;
    v2 += a2 * 0.1;
    x1 += v1;
    x2 += v2;

    if (x1 < 50 || x2 > canvas.width - 50) return;
    animFrame = requestAnimationFrame(draw);
  }

  draw();
}

function drawArrow(ctx, fromx, fromy, tox, toy, color){
  const headlen = 10;
  const angle = Math.atan2(toy - fromy, tox - fromx);
  ctx.strokeStyle = color;
  ctx.fillStyle = color;
  ctx.beginPath();
  ctx.moveTo(fromx, fromy);
  ctx.lineTo(tox, toy);
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(tox, toy);
  ctx.lineTo(tox - headlen * Math.cos(angle - Math.PI/6), toy - headlen * Math.sin(angle - Math.PI/6));
  ctx.lineTo(tox - headlen * Math.cos(angle + Math.PI/6), toy - headlen * Math.sin(angle + Math.PI/6));
  ctx.lineTo(tox, toy);
  ctx.fill();
}

function reiniciar() {
  cancelarAnimacion();
  const ctx = document.getElementById('canvas').getContext('2d');
  ctx.clearRect(0,0,700,250);
  document.getElementById('F1').textContent = "‚Äì";
  document.getElementById('F2').textContent = "‚Äì";
  document.getElementById('a1').textContent = "‚Äì";
  document.getElementById('a2').textContent = "‚Äì";
}

function cancelarAnimacion() {
  if (animFrame) {
    cancelAnimationFrame(animFrame);
    animFrame = null;
  }
}
</script>
</body>
</html>
